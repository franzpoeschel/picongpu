{
  "$id": "https://registry.hzdr.de/crp/picongpu/schema/picongpu.pypicongpu.output.checkpoint.Checkpoint",
  "type": "object",
  "description": "Checkpoint output configuration for PIConGPU",
  "unevaluatedProperties": false,
  "anyOf": [
    {
      "required": [
        "period"
      ]
    },
    {
      "required": [
        "timePeriod"
      ]
    }
  ],
  "properties": {
    "period": {
      "$ref": "https://registry.hzdr.de/crp/picongpu/schema/picongpu.pypicongpu.output.timestepspec.TimeStepSpec",
      "description": "Create checkpoints in specified steps"
    },
    "timePeriod": {
      "type": "number",
      "description": "Create checkpoints every M minutes",
      "minimum": 0
    },
    "directory": {
      "type": "string",
      "description": "Directory inside simOutput for writing checkpoints",
      "default": "checkpoints"
    },
    "file": {
      "type": "string",
      "description": "defines the base name (or prefix) for the checkpoint files written by PIConGPU."
    },
    "restart": {
      "type": "boolean",
      "description": "Restart a simulation from the latest checkpoint",
      "default": false
    },
    "tryRestart": {
      "type": "boolean",
      "description": "Restart a simulation from the latest checkpoint if available, else start from scratch",
      "default": false
    },
    "restartStep": {
      "type": "integer",
      "description": "Select a specific restart checkpoint",
      "minimum": 0
    },
    "restartDirectory": {
      "type": "string",
      "description": "Directory inside simOutput containing checkpoints for a restart",
      "default": "checkpoints"
    },
    "restartFile": {
      "type": "string",
      "description": "Relative or absolute fileset prefix for reading checkpoints"
    },
    "restartChunkSize": {
      "type": "integer",
      "description": "Number of particles processed in one kernel call during restart",
      "minimum": 1
    },
    "restartLoop": {
      "type": "integer",
      "description": "Number of times to restart the simulation after it has finished",
      "minimum": 0
    },
    "openPMD": {
      "type": "object",
      "description": "Additional options for openPMD IO-backend",
      "unevaluatedProperties": false,
      "properties": {
        "ext": {
          "type": "string",
          "description": "File extension for openPMD output"
        },
        "infix": {
          "type": "string",
          "description": "Infix for openPMD output files"
        },
        "json": {
          "type": "string",
          "description": "JSON configuration for openPMD"
        },
        "dataPreparationStrategy": {
          "type": "string",
          "description": "Data preparation strategy for openPMD"
        },
        "jsonRestart": {
          "type": "string",
          "description": "JSON configuration for openPMD restart"
        },
        "toml": {
          "type": "string",
          "description": "TOML configuration for openPMD"
        },
        "particleIOChunkSize": {
          "type": "integer",
          "description": "Chunk size for particle IO in openPMD",
          "minimum": 1
        }
      }
    }
  }
}
